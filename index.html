fix the code so that it reads other pdfs other than yoo:<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <title>CBE Precision Terminal - Official 2025 Rates</title>
Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
Â  Â Â 
Â  Â  <style>
Â  Â  Â  Â  :root { --cbe: #003366; --gold: #c5a059; --bg: #f4f7f9; }
Â  Â  Â  Â  body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); height: 100vh; display: flex; flex-direction: column; color: #333; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .header { background: var(--cbe); color: white; padding: 15px; text-align: center; border-bottom: 4px solid var(--gold); }
Â  Â  Â  Â  .button-bar { background: white; padding: 12px; display: flex; justify-content: center; gap: 12px; border-bottom: 1px solid #ddd; position: sticky; top: 0; z-index: 100; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .btn { padding: 10px 22px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; transition: 0.2s; font-size: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
Â  Â  Â  Â  .btn-blue { background: var(--cbe); color: white; }
Â  Â  Â  Â  .btn-gold { background: var(--gold); color: white; }

Â  Â  Â  Â  .main-container { display: flex; flex: 1; overflow: hidden; }
Â  Â  Â  Â  .left-panel { flex: 1; overflow-y: auto; padding: 25px; }
Â  Â  Â  Â  .right-panel { flex: 1; background: #525659; display: none; }Â 
Â  Â  Â  Â  iframe { width: 100%; height: 100%; border: none; }

Â  Â  Â  Â  .card { background: white; border-radius: 8px; padding: 20px; margin-bottom: 25px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-top: 3px solid var(--gold); }
Â  Â  Â  Â  .filter-row { display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px; background: #f8fafc; padding: 15px; border-radius: 8px; align-items: flex-end; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  select { padding: 9px; border-radius: 5px; border: 1px solid #cbd5e1; min-width: 150px; background: white; }
Â  Â  Â  Â  #varDisplay { font-size: 24px; font-weight: bold; color: #dc2626; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  table { width: 100%; border-collapse: collapse; }
Â  Â  Â  Â  th { text-align: left; background: #f1f5f9; color: var(--cbe); font-size: 11px; text-transform: uppercase; letter-spacing: 1px; }
Â  Â  Â  Â  td, th { padding: 14px; border-bottom: 1px solid #e2e8f0; }
Â  Â  Â  Â  .rate-cell { font-family: 'Consolas', monospace; font-weight: bold; color: var(--cbe); font-size: 16px; }

Â  Â  Â  Â  /* Monthly Menu Styling */
Â  Â  Â  Â  #year-menu { display:none; position:absolute; top:45px; left:0; z-index:1000; min-width:300px; border:1px solid #ddd; padding: 15px; background: white; }
Â  Â  Â  Â  #month-grid { display:grid; grid-template-columns: repeat(4, 1fr); gap:8px; margin-top:10px; }
Â  Â  Â  Â  .month-btn { padding: 8px; font-size: 11px; background: #f1f5f9; border: 1px solid #ddd; cursor: pointer; border-radius: 4px; font-weight: bold; }
Â  Â  Â  Â  .month-btn:hover { background: var(--gold); color: white; }
Â  Â  </style>
</head>
<body>

<div class="header"><h2 style="margin:0">CBE Precision Data Center</h2></div>

<div class="button-bar">
Â  Â  <button class="btn btn-blue" onclick="window.open('yoo.pdf')">ğŸ“‘ 1. Pop-up PDF</button>
Â  Â  <div style="display:inline-block; position:relative;">
Â  Â  Â  Â  <button class="btn btn-blue" onclick="toggleYearMenu()">ğŸ‘ï¸ 2. Web PDF View</button>
Â  Â  Â  Â  <div id="year-menu" class="card">
Â  Â  Â  Â  Â  Â  <div style="display:flex; gap:10px; justify-content: center;">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-gold" onclick="showMonths('2024')">2024</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-gold" onclick="showMonths('2025')">2025</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="month-grid"></div>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <button class="btn btn-gold" onclick="toggleSec('fx-sec')">ğŸ’° 3. Live FX Table</button>
Â  Â  <button class="btn btn-gold" onclick="toggleSec('map-sec')">ğŸ—ºï¸ 4. Market Trends</button>
</div>

<div class="main-container">
Â  Â  <div class="left-panel">
Â  Â  Â  Â  <div id="fx-sec" class="card" style="display:none;">
Â  Â  Â  Â  Â  Â  <h3>Official Exchange Rates (CBE Reference)</h3>
Â  Â  Â  Â  Â  Â  <table id="fx-table">
Â  Â  Â  Â  Â  Â  Â  Â  <thead><tr><th>Currency</th><th>Rate (EGP)</th><th>Status</th></tr></thead>
Â  Â  Â  Â  Â  Â  Â  Â  <tbody id="fx-body"></tbody>
Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  <p id="timestamp" style="font-size: 11px; color: #666; margin-top: 10px;"></p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="map-sec" class="card" style="display:none;">
Â  Â  Â  Â  Â  Â  <h3>Strategic Trend Analysis</h3>
Â  Â  Â  Â  Â  Â  <div class="filter-row">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="filter-group"><label>Currency</label><br><select id="cur" onchange="updateMap()"></select></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="filter-group"><label>From</label><br><select id="start" onchange="updateMap()"></select></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="filter-group"><label>To</label><br><select id="end" onchange="updateMap()"></select></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="filter-group"><label>Period Var.</label><div id="varDisplay">0%</div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <canvas id="chartCanvas" height="130"></canvas>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="pdf-data"></div>
Â  Â  </div>
Â  Â  <div class="right-panel" id="pdf-panel"><iframe id="pdf-frame" src="yoo.pdf"></iframe></div>
</div>

<script>
Â  Â  const cbeOfficial = { 'USD': 47.531, 'EUR': 56.001, 'GBP': 64.276, 'CHF': 60.336, 'SAR': 12.672, 'AED': 12.939, 'JPY': 0.304 };
Â  Â  const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
Â  Â  const fullTimeline = [];
Â  Â  [2022, 2023, 2024, 2025].forEach(y => monthNames.forEach(m => fullTimeline.push(`${m} ${y}`)));

Â  Â  const ratesArchive = {
Â  Â  Â  Â  USD: [15.7, 15.7, 15.7, 18.3, 18.5, 18.7, 18.9, 19.1, 19.3, 19.6, 24.2, 24.7, 29.8, 30.5, 30.8, 30.9, 30.9, 30.9, 30.9, 30.9, 30.9, 30.9, 30.9, 30.9, 30.9, 30.9, 47.5, 48.2, 47.9, 47.5, 48.1, 48.5, 48.3, 48.1, 49.2, 49.5, 48.8, 48.5, 48.2, 47.9, 47.5, 47.2, 47.4, 47.6, 47.3, 47.2, 47.1, 47.4],
Â  Â  Â  Â  EUR: [17.8, 17.7, 17.5, 19.8, 19.6, 19.7, 19.2, 19.1, 19.0, 19.3, 24.5, 26.1, 31.5, 32.4, 33.1, 33.7, 33.5, 33.8, 34.2, 33.9, 33.2, 33.6, 33.8, 34.1, 33.9, 33.5, 51.5, 52.3, 51.8, 51.2, 52.1, 52.8, 53.4, 53.1, 52.5, 52.2, 52.8, 52.4, 53.1, 53.9, 54.2, 54.5, 54.7, 54.9, 55.1, 55.0, 54.8, 55.0],
Â  Â  Â  Â  GBP: [21.3, 21.1, 20.8, 23.9, 23.1, 23.0, 22.8, 22.5, 22.1, 22.4, 28.2, 30.1, 35.9, 36.8, 37.5, 38.4, 38.6, 39.2, 39.8, 39.4, 38.9, 38.1, 38.5, 39.1, 39.3, 39.1, 60.1, 61.2, 60.5, 60.1, 61.5, 62.1, 62.8, 63.5, 63.8, 63.2, 63.4, 63.1, 63.3, 63.5, 63.1, 62.9, 63.2, 63.5, 63.3, 63.1, 63.1, 63.4],
Â  Â  Â  Â  SAR: [4.18, 4.18, 4.18, 4.88, 4.93, 4.98, 5.03, 5.09, 5.14, 5.22, 6.44, 6.57, 7.93, 8.12, 8.20, 8.23, 8.23, 8.23, 8.23, 8.23, 8.23, 8.23, 8.23, 8.23, 8.23, 8.23, 12.6, 12.8, 12.7, 12.6, 12.8, 12.9, 12.8, 12.8, 13.1, 13.2, 13.0, 12.9, 12.8, 12.7, 12.6, 12.5, 12.6, 12.6, 12.6, 12.6, 12.5, 12.6],
Â  Â  Â  Â  AED: [4.27, 4.27, 4.27, 4.98, 5.03, 5.09, 5.14, 5.20, 5.25, 5.33, 6.58, 6.72, 8.11, 8.30, 8.38, 8.41, 8.41, 8.41, 8.41, 8.41, 8.41, 8.41, 8.41, 8.41, 8.41, 8.41, 12.9, 13.1, 13.0, 12.9, 13.1, 13.2, 13.1, 13.1, 13.4, 13.5, 13.2, 13.2, 13.1, 13.0, 12.9, 12.8, 12.9, 12.9, 12.8, 12.8, 12.8, 12.9],
Â  Â  Â  Â  CHF: [17.1, 17.0, 16.9, 19.5, 19.1, 19.4, 19.5, 19.8, 20.1, 20.5, 25.4, 26.6, 32.1, 32.8, 33.4, 34.2, 34.5, 34.8, 35.5, 35.1, 34.8, 34.9, 35.2, 36.1, 36.3, 35.8, 53.5, 54.2, 53.6, 53.1, 54.5, 55.2, 56.1, 56.5, 56.1, 55.8, 56.4, 56.8, 57.2, 57.8, 58.1, 58.4, 58.8, 59.1, 58.9, 58.8, 58.8, 58.9],
Â  Â  Â  Â  JPY: [13.6, 13.5, 12.9, 14.5, 14.3, 13.9, 13.8, 13.9, 13.5, 13.3, 17.2, 18.2, 22.5, 23.1, 23.4, 23.1, 22.2, 21.8, 21.5, 21.2, 20.9, 20.5, 20.8, 21.4, 21.2, 20.8, 31.5, 32.1, 31.2, 30.5, 31.1, 31.8, 33.5, 32.8, 31.9, 32.2, 31.8, 31.5, 31.1, 30.8, 30.5, 30.1, 30.2, 30.4, 29.9, 29.8, 29.9, 30.0]
Â  Â  };

Â  Â  function toggleYearMenu() {Â 
Â  Â  Â  Â  const m = document.getElementById('year-menu');Â 
Â  Â  Â  Â  m.style.display = (m.style.display === 'block') ? 'none' : 'block';Â 
Â  Â  }

Â  Â  function showMonths(year) {
Â  Â  Â  Â  const grid = document.getElementById('month-grid');
Â  Â  Â  Â  grid.innerHTML = '';
Â  Â  Â  Â  monthNames.forEach(m => {
Â  Â  Â  Â  Â  Â  const btn = document.createElement('button');
Â  Â  Â  Â  Â  Â  btn.className = 'month-btn';
Â  Â  Â  Â  Â  Â  btn.innerText = m;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  let fileName = `${year}-${m}.pdf`;
Â  Â  Â  Â  Â  Â  if (year === '2025') {
Â  Â  Â  Â  Â  Â  Â  Â  if (m === 'Dec') fileName = 'yoo.pdf';
Â  Â  Â  Â  Â  Â  Â  Â  if (m === 'Nov') fileName = 'novv.pdf';
Â  Â  Â  Â  Â  Â  Â  Â  if (m === 'Oct') fileName = 'octt.pdf';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  btn.onclick = () => { loadSpecificPDF(fileName); toggleYearMenu(); };
Â  Â  Â  Â  Â  Â  grid.appendChild(btn);
Â  Â  Â  Â  });
Â  Â  }

Â  Â  async function loadSpecificPDF(fileName) {
Â  Â  Â  Â  const panel = document.getElementById('pdf-panel');
Â  Â  Â  Â  const frame = document.getElementById('pdf-frame');
Â  Â  Â  Â  frame.src = fileName;
Â  Â  Â  Â  panel.style.display = 'block';
Â  Â  Â  Â  initScraper(fileName);
Â  Â  }

Â  Â  async function initScraper(fileName = 'yoo.pdf') {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const pdf = await pdfjsLib.getDocument(fileName).promise;
Â  Â  Â  Â  Â  Â  let h = `<h3>Extract from ${fileName}</h3>`;
Â  Â  Â  Â  Â  Â  for(let i=1; i<=Math.min(pdf.numPages, 3); i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const page = await pdf.getPage(i), text = await page.getTextContent();
Â  Â  Â  Â  Â  Â  Â  Â  let rows = '';
Â  Â  Â  Â  Â  Â  Â  Â  text.items.forEach(it => { if(it.str.trim().length > 10) rows += `<tr><td>${it.str}</td></tr>`; });
Â  Â  Â  Â  Â  Â  Â  Â  if(rows) h += `<div class="card"><h4>Page ${i}</h4><table>${rows}</table></div>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  document.getElementById('pdf-data').innerHTML = h;
Â  Â  Â  Â  } catch(e) {Â 
Â  Â  Â  Â  Â  Â  document.getElementById('pdf-data').innerHTML = `<p style="color:red">File ${fileName} not found.</p>`;Â 
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function populateDropdowns() {
Â  Â  Â  Â  const s = document.getElementById('start'), e = document.getElementById('end'), c = document.getElementById('cur');
Â  Â  Â  Â  fullTimeline.forEach((m, i) => {
Â  Â  Â  Â  Â  Â  s.innerHTML += `<option value="${i}">${m}</option>`;
Â  Â  Â  Â  Â  Â  e.innerHTML += `<option value="${i}" ${i==47?'selected':''}>${m}</option>`;
Â  Â  Â  Â  });
Â  Â  Â  Â  Object.keys(ratesArchive).forEach(curr => c.innerHTML += `<option value="${curr}">${curr}</option>`);
Â  Â  }

Â  Â  let myChart = null;
Â  Â  function updateMap() {
Â  Â  Â  Â  const curr = document.getElementById('cur').value, s = parseInt(document.getElementById('start').value), e = parseInt(document.getElementById('end').value);
Â  Â  Â  Â  if(s >= e) return;
Â  Â  Â  Â  const labels = fullTimeline.slice(s, e + 1), data = ratesArchive[curr].slice(s, e + 1);
Â  Â  Â  Â  document.getElementById('varDisplay').innerText = `+${(((data[data.length-1]-data[0])/data[0])*100).toFixed(1)}%`;
Â  Â  Â  Â  const ctx = document.getElementById('chartCanvas').getContext('2d');
Â  Â  Â  Â  if(myChart) myChart.destroy();
Â  Â  Â  Â  myChart = new Chart(ctx, {
Â  Â  Â  Â  Â  Â  type: 'line',
Â  Â  Â  Â  Â  Â  plugins: [ChartDataLabels],
Â  Â  Â  Â  Â  Â  data: { labels: labels, datasets: [{ data: data, borderColor: '#c5a059', backgroundColor: 'rgba(197, 160, 89, 0.1)', fill: true, tension: 0.3 }] },
Â  Â  Â  Â  Â  Â  options: { plugins: { datalabels: { display: false }, legend: {display:false} }, scales: { y: { grace: '15%' } } }
Â  Â  Â  Â  });
Â  Â  }

Â  Â  async function loadFX() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const res = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
Â  Â  Â  Â  Â  Â  const d = await res.json();
Â  Â  Â  Â  Â  Â  const usdAnchor = cbeOfficial.USD;Â 
Â  Â  Â  Â  Â  Â  let h = '';
Â  Â  Â  Â  Â  Â  Object.keys(cbeOfficial).forEach(curr => {
Â  Â  Â  Â  Â  Â  Â  Â  const finalRate = (curr === 'USD') ? usdAnchor.toFixed(4) : ((1 / d.rates[curr]) * usdAnchor).toFixed(4);
Â  Â  Â  Â  Â  Â  Â  Â  h += `<tr><td><b>${curr}</b></td><td class="rate-cell">${finalRate}</td><td><span style="color:green">â— Verified</span></td></tr>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.getElementById('fx-body').innerHTML = h;
Â  Â  Â  Â  Â  Â  document.getElementById('timestamp').innerText = "Last Sync: " + new Date().toLocaleString();
Â  Â  Â  Â  } catch(e) {
Â  Â  Â  Â  Â  Â  let h = '';
Â  Â  Â  Â  Â  Â  Object.keys(cbeOfficial).forEach(curr => { h += `<tr><td><b>${curr}</b></td><td class="rate-cell">${cbeOfficial[curr]}</td><td><span style="color:orange">â— Offline</span></td></tr>`; });
Â  Â  Â  Â  Â  Â  document.getElementById('fx-body').innerHTML = h;
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function toggleSec(id) {Â 
Â  Â  Â  Â  const s = document.getElementById(id);Â 
Â  Â  Â  Â  s.style.display = (s.style.display==='none')?'block':'none';Â 
Â  Â  Â  Â  if(id==='fx-sec') loadFX();Â 
Â  Â  Â  Â  if(id==='map-sec') updateMap();Â 
Â  Â  }

Â  Â  window.onload = () => { populateDropdowns(); initScraper('yoo.pdf'); };
</script>
</body>
</html>
